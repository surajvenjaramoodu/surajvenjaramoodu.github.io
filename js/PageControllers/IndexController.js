var app=angular.module("ServiceViewModule",['angular.filter']);app.controller("ServiceViewController",function($scope,$http,$timeout,$interval){$scope.Lang=localStorage.getItem("lang");$.ajax({url:'Services.aspx/GetAllCommonService',data:"{'Lang':'"+localStorage.getItem("lang")+"'}",async:false,type:'POST',contentType:'application/json; charset=utf-8',dataType:"json",success:function(data){var jsonObj=JSON.parse(data.d);$scope.AllServices=jsonObj;}})
$.ajax({url:'Doctors.aspx/GetAllDoctors',async:false,type:'POST',contentType:'application/json; charset=utf-8',dataType:"json",success:function(data){var jsonObj=JSON.parse(data.d);$scope.Doctorslink=jsonObj;}})
$.ajax({url:'Testimonial.aspx/GetAllTestimonials',async:false,type:'POST',contentType:'application/json; charset=utf-8',data:"{'BranchID':'"+""+"'}",dataType:"json",success:function(data){var Response=JSON.parse(data.d);$scope.AllTestimonials=Response;$timeout(function(){if($('.testimonials-carousel').length){$('.testimonials-carousel').owlCarousel({loop:true,margin:60,nav:true,autoplayHoverPause:false,autoplay:5000,smartSpeed:700,navText:['<span class="fa fa-angle-left"></span>','<span class="fa fa-angle-right"></span>'],responsive:{0:{items:1},600:{items:1},760:{items:2},1024:{items:3},1100:{items:3}}});}})}})});function Datefunction(){$('.DatePkr_TxtBx').datepicker({format:"dd-M-yyyy",autoclose:true,startDate:'today'});}$(function(){localStorage.removeItem('PageObj');Datefunction();$('#datetimepicker3').datetimepicker({format:'LT'});LoadLocation();});function LoadLocation(){$("#txtLoc").autocomplete({source:function(request,response){$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"FixAppointment.aspx/LoadLocation",data:"{'term':'"+$('#txtLoc').val().trim().replace(/[\\\"]/g,'')+"'}",dataType:"json",async:true,html:true,success:function(data){var pars=JSON.parse(data.d);response($.map(pars,function(name,val){return{label:name.Name,value:name.LocID}}));},failure:function(response){},});},change:function(event,ui){if(ui.item==null){$("#txtLoc").val('');$("#txtLoc").focus();$("#txtDepart").autocomplete({source:[]});$("#txtDepart").val('');$("#txtDoc").autocomplete({source:[]});$("#txtDoc").val('');$('#divSchedule').hide();$scope.selectedDoc="";$scope.selectedDepart="";}},select:function(event,ui){var id=ui.item.value;var name=ui.item.label;$("#txtLoc").val(name);$("#txtDepart").val('');$("#txtDoc").val('');$("#txtDoc").autocomplete({source:[]});Autocomplete(id);$('#hdnLocID').val(name);return false;},focus:function(event,ui){event.preventDefault();$("#txtLoc").val(ui.item.label);},minLength:1}).focus(function(){$(this).val('');$(this).autocomplete("search","%");}).data("uiAutocomplete")._renderItem=function(ul,item){return $("<li>").data("item.autocomplete",item).append("<a><span>"+item.label+"</span></a>").appendTo(ul).css("position","static");};}function Autocomplete(LocID){$("#txtDepart").autocomplete({source:function(request,response){$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"FixAppointment.aspx/LoadDepartmentforappointment",data:"{'term':'"+$('#txtDepart').val().trim().replace(/[\\\"]/g,'')+"','LocID':'"+LocID+"'}",dataType:"json",async:true,html:true,success:function(data){var pars=JSON.parse(data.d);response($.map(pars,function(name,val){return{label:name.Name,value:name.ID}}));},failure:function(response){},});},select:function(event,ui){var id=ui.item.value;var name=ui.item.label;$("#txtDepart").val(name);$("#txtDoc").val('');LoadDoctorsByDepartID(id,LocID);$('#hdnDepartID').val(id);return false;},focus:function(event,ui){event.preventDefault();$("#txtDepart").val(ui.item.label);},minLength:1}).focus(function(){$(this).val('');$(this).autocomplete("search","%");}).data("uiAutocomplete")._renderItem=function(ul,item){return $("<li>").data("item.autocomplete",item).append("<a><span>"+item.label+"</span></a>").appendTo(ul).css("position","static");};}function LoadDoctorsByDepartID(deptID,LocID){$("#txtDoc").autocomplete({source:function(request,response){$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"FixAppointment.aspx/LoadDoctorsByDepartID",data:"{'DeptID':'"+deptID+"','term':'"+$('#txtDoc').val().trim().replace(/[\\\"]/g,'')+"','LocID':'"+LocID+"'}",dataType:"json",async:true,html:true,success:function(data){var pars=JSON.parse(data.d);response($.map(pars,function(name,val){return{label:name.Name,value:name.ID}}));},failure:function(response){},});},select:function(event,ui){var id=ui.item.value;var name=ui.item.label;$("#txtDoc").val(name);$('#hdnDocID').val(id);return false;},focus:function(event,ui){event.preventDefault();$("#txtDoc").val(ui.item.label);},minLength:1}).focus(function(){$(this).val('');$(this).autocomplete("search","%");}).data("uiAutocomplete")._renderItem=function(ul,item){return $("<li>").data("item.autocomplete",item).append("<a><span>"+item.label+"</span></a>").appendTo(ul).css("position","static");};}function MakeAppointment(){var PageObj={Date:$('.DatePkr_TxtBx').val(),Time:$('#txtReqTime').val(),DepartID:$('#hdnDepartID').val(),DoctorID:$('#hdnDocID').val(),DepartName:$('#txtDepart').val(),DoctorName:$('#txtDoc').val(),Location:$('#hdnLocID').val(),};localStorage.setItem("PageObj",JSON.stringify(PageObj));location.href="FixAppointment.html";}function Subscribe(){if($('#txtEmail').val()!=''){$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:"index.aspx/SubscribeNews",data:"{'Email':'"+$('#txtEmail').val()+"'}",dataType:"json",async:false,html:true,success:function(data){$('#txtEmail').val('')
swal({title:"Success",text:"Thanks for subscribing to our newsletter",timer:3000,showConfirmButton:false,type:"success",});}});}else
swal("Error!","Plese enter email","warning")}$(function(){$('[data-popup="popup-1"]').fadeIn(350);$('[data-popup-close]').on('click',function(e){var targeted_popup_class=jQuery(this).attr('data-popup-close');$('[data-popup="'+targeted_popup_class+'"]').fadeOut(350);e.preventDefault();});});app.filter('spaceless',function(){return function(input){if(input){return(((input.replace(/-/g,'~')).replace(/:/g,'_')).replace(/\s+/g,'-')).replace(/&/g,'and');}}});